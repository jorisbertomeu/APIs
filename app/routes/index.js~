var BoardsController = require('../controllers/boards');
var LabsController = require('../controllers/labs');
var Board_instancesController = require('../controllers/board_instances');
var CustomersController = require('../controllers/customers');

module.exports = function(app, express) {
    var router = express.Router();

    router.use(function(req, res, next) {
	console.log('Something is happening.');
	next();
    });

    router.get('/', function(req, res) {
	res.json({ message: 'Hooray! Welcome to our private API! Made with <3 by Baylibre' });	
    });

    /* BOARDS RES */
    router.route('/boards')
	.post(BoardsController._postL1)
	.get(BoardsController._getL1);
    router.route('/boards/:board_id')
	.get(BoardsController._getL2)
	.delete(BoardsController._deleteL2)
	.put(BoardsController._putL2);
    
    /* LABS RES */
    router.route('/labs')
	.post(LabsController._postL1)
	.get(LabsController._getL1);
    router.route('/labs/:lab_id')
	.get(LabsController._getL2)
	.delete(LabsController._deleteL2)
	.put(LabsController._putL2);

    /* BOARD_INSTANCES RES */
    router.route('/board_instances')
	.post(Board_instancesController._postL1)
	.get(Board_instancesController._getL1);
    router.route('/board_instances/:board_id')
	.get(Board_instancesController._getL2)
	.delete(Board_instancesController._deleteL2)
	.put(Board_instancesController._putL2);

    /* CUSTOMERS RES */
    router.route('/customers')
	.post(CustomerController._postL1)
	.get(CustomerController._getL1);
    router.route('/customers/:customer_id')
	.get(CustomerController._getL2)
	.delete(CustomerController._deleteL2)
	.put(CustomerController._putL2);

    
    app.use('/', router);
};
